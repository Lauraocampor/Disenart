<!-- HTML -->
<!DOCTYPE html>
<html lang="es"  style="overflow-x: hidden;">
  <!-- HEAD -->
  <%- include("../partials/head") %>
  <!-- BODY -->
  <body class="bodyXL">
    <!-- HEADER -->
    <%- include('../partials/header') %>
    <!-- MAIN -->
    <main class="mainPadding">
      <section class="home-wrap">
          <!-- FORMULARIO REGISTER -->
          <div class="form">
            <div class="modal-content" id="register-login-ejs__transformXY">
              <h2 class="modal-form__titulo title_register">Crear una cuenta</h2>
              <form class="modal-form" action="/users/register" method="POST" enctype="multipart/form-data">
                <label for="email">Correo electrónico</label>
                <input class="input <%= locals.errors && errors.email ? 'is-invalid' : null %>" type="email" name="email" value="<%= locals.oldData ? oldData.email : null %>">
                <% if (locals.errors && errors.email ) { %>
                  <div class="text-danger"> 
                    <%= errors.email.msg %>
                  </div>                 
                <% } %>     
                <label for="firstName">Nombre</label>
                <input class="input <%= locals.errors && errors.firstName ? 'is-invalid' : null %>" type="text" name="firstName" value="<%= locals.oldData ? oldData.firstName : null %>">
                <% if (locals.errors && errors.firstName ) { %>
                  <div class="text-danger"> 
                    <%= errors.firstName.msg %>
                  </div>                 
                <% } %>  
                <label for="lastName">Apellido</label>
                <input class="input <%= locals.errors && errors.lastName ? 'is-invalid' : null %>" type="text" name="lastName" value="<%= locals.oldData ? oldData.lastName : null %>">
                <% if (locals.errors && errors.lastName ) { %>
                  <div class="text-danger"> 
                    <%= errors.lastName.msg %>
                  </div>                 
                <% } %>  
                <label for="category">Categoría</label>
                <select class="input <%= locals.errors && errors.category ? 'is-invalid' : null %>" name="category">
                  <option value="">Seleccione una categoría</option>
									<%  
										let categories = ['Administrador', 'Cliente']
									%>
									<% for (const oneCategory of categories) { %>
										<option 
											value="<%= oneCategory %>"
											<%= locals.oldData && (oneCategory === oldData.category) ? 'selected' : null %> 
										> <%= oneCategory %> </option>
									<% } %>           
                </select>
                <% if (locals.errors && errors.category ) { %>
                  <div class="text-danger"> 
                    <%= errors.category.msg %>
                  </div>                 
                <% } %>        
                <label for="password">Contraseña</label>
                <input class="input <%= locals.errors && errors.password ? 'is-invalid' : null %>" type="password" name="password" value="<%= locals.oldData ? oldData.password : null %>">
                <% if (locals.errors && errors.password ) { %>
                  <div class="text-danger"> 
                    <%= errors.password.msg %>
                  </div>                 
                <% } %>  
                <label for="avatar">Imagen de perfil</label>
                <input class="input" type="file" name="avatar" accept=".jpg, .jpeg, .png, .gif">      
                <% if (locals.errors && errors.avatar ) { %>
                  <div class="text-danger"> 
                    <%= errors.avatar.msg %>
                  </div>                 
                <% } %>  
                <label for="">Fecha de nacimiento</label>
                <div class="datefields">
                  <select class="input date <%= locals.errors && errors.day ? 'is-invalid' : null %>" name="day">
                    <option value="">Día</option>
                    <%  
                      let days = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31']
                    %>
                    <% for (const oneDay of days) { %>
                      <option 
                        value="<%= oneDay %>"
                        <%= locals.oldData && (oneDay === oldData.day) ? 'selected' : null %> 
                      > <%= oneDay %> </option>
                    <% } %>  
                  </select>
                  <select class="input date <%= locals.errors && errors.month ? 'is-invalid' : null %>" name="month" value="<%= locals.oldData ? oldData.month : null %>">
                    <option value="">Mes</option>
                    <%  
                      let months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre']
                    %>
                    <% for (const oneMonth of months) { %>
                    <option 
                      value="<%= oneMonth %>"
                      <%= locals.oldData && (oneMonth === oldData.month) ? 'selected' : null %> 
                    > <%= oneMonth %></option>
                    <% } %>  
                  </select>
                  <select class="input date <%= locals.errors && errors.year ? 'is-invalid' : null %>" name="year">
                    <option value="">Año</option>
                    <%  
                      let years = ['2020', '2019', '2018', '2017', '2016', '2015', '2014', '2013', '2012', '2011','2010', '2009', '2008', '2007', '2006', '2005', '2004', '2003', '2002', '2001','2000', '1999', '1998', '1997', '1996', '1995', '1994', '1993', '1992', '1991','1990', '1989', '1988', '1987', '1986', '1985', '1984', '1983', '1982', '1981','1980', '1979', '1978', '1977', '1976', '1975', '1974', '1973', '1972', '1971','1970', '1969', '1968', '1967', '1966', '1965', '1964', '1963', '1962', '1961','1960', '1959', '1958', '1957', '1956', '1955', '1954', '1953', '1952', '1951','1950', '1949', '1948', '1947', '1946', '1945', '1944', '1943', '1942', '1941','1940', '1939', '1938', '1937', '1936', '1935', '1934', '1933', '1932', '1931','1930', '1929', '1928', '1927', '1926', '1925', '1924', '1923', '1922', '1921','1920']
                    %>
                    <% for (const oneYear of years) { %>
                    <option 
                      value="<%= oneYear %>"
                      <%= locals.oldData && (oneYear === oldData.year) ? 'selected' : null %> 
                    > <%= oneYear %></option>
                    <% } %>  
                  </select>  
                </div>
                <% if (locals.errors && errors.day ) { %>
                  <div class="text-danger"> 
                    <%= errors.day.msg %>
                  </div>                 
                <% } %>
                <% if (locals.errors && errors.month ) { %>
                  <div class="text-danger"> 
                    <%= errors.month.msg %>
                  </div>                 
                <% } %>
                <% if (locals.errors && errors.year ) { %>
                  <div class="text-danger"> 
                    <%= errors.year.msg %>
                  </div>                 
                <% } %>
                <button class="modal-submit" type="submit">Continuar</button>
                <div class="modal-bottom">
                  <p>¿Ya tienes una cuenta?</p> <a href="/login">Iniciar sesión</a>
                </div>
              </form>
            </div>
          </div>
      </section>
    </main>
    <!-- FOOTER -->
    <%- include("../partials/footer"); %>
    <!-- SCRIPT -->
    <script src="/../js/main.js"></script>
    <script src="/../js/header.js"></script>
  </body>
</html>